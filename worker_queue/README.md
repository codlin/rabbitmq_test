# 测试说明

用来测试work queues模式

## work queues模式的特点

1. 生产者和消费者共享同一消息队列
2. 生产者将消息发布到队列，消费者读取消息进行消费
3. 消息只会被消费1次
4. 如果消费者有多个，则会按照竞争模式消费消息

## Routing模式的适用场景

适用于点对点的通信模式，效率较高

## 如何实施

生产者和消费者需要声明名字相同的同一个队列
```go
q, err := ch.QueueDeclare(
		"task_queue",
		true,
		false,
		false,
		false,
		nil,
	)
```

## 测试用例

1. 启动多个消费者，然后再启动生产者，是否生产者的消息可以被所有消费者所
2. 只启动生产者，不启动消费者，生产者发送完消息后，在启动消费者，验证是否生产者的消息可以按照work queue的模式公平分发给不同的worker

## 测试结论

**在route direct模式下，消费者指定队列为相同的名字，则效果相当于work queue模式**

## 总结

work queues是最经典的消息队列模式

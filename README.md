---
title: RabbitMQ学习笔记
date: 2020-4-4 22:10:00
categories:
- RabbitMQ
- 消息中间件
tags:
- RabbitMQ
- 消息中间件

---

### 目录说明

`sample`和`worker_queue`目录的代码是等效的，是最基本的work queue模式。
这种模式不需要声明交换机，可以使用系统默认的交换机，生产者和消费者通过队列直接通信，只需要在声明队列时指定同样的队列名字即可。

`route_direct`目录是route模式，生产者和消费者通过Route Key在同一交换机上生成/消费数据。
生产者声明一个交换机，然后在交换机上发布信息，生产者需要指明发布消息的Key。
消费者需要指定为相同的交换机，然后声明一个队列，队列的名字不需要指定，系统自动生成随机队列名字。
**消费者需要绑定队列、交换机、Route Key三者**，然后才能消费生成者生成的对应消息。

因为消费者的队列是随机生成的，所以相当于每个消费者都有一个专属队列，因此生产者发布的相同的Route Key消息所有消费者都完全可以收到，即1条消息分配到了交换机上的多个队列。

如果每个消费者在声明队列时都指定了相同的队列名字，那么所有消费者共享同一个队列，这种清空退化为`work queue`模式，因此说，**work queue是一种特殊的route模式**

消费者可以指定不同Route Key，这样可以对消息进行过滤，收到和Key精确匹配的消息。

<!--more-->


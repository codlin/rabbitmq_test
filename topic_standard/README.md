# 测试说明

测试**标准**Topic模式

## 模式特点

1. 生产者可以发送消息到一个topic类型的交换机
2. 发布消息时指定的Routing Key不能时任意值，需要是点分的单词或者模式
3. 有两个非常重要的模式：*可以匹配一个单词；#可以匹配0个或多个单词
4. 如果没有消费者，生产者生成的消息会丢失
5. 变种1：如果一个队列绑定的key为#，那么它会收到所有的消息，就像fanout模式
6. 变种2：如果一个队列绑定的key中**没有**#和*，那么它等效于direct模式
7. 变种3：如果所有消费者绑定相同的key，相同的队列名字，那么它等效于worker queue模式

## 适用场景

该模式可以使消费者对消息进行过滤，只订阅自己感兴趣的消息

## 如何实施

1. 声明交换机时指定的类型为topic
2. 绑定的routing key需要时点分的单词或混合模式*和#

## 测试用例

1. 启动一个生产者，1个消费者，观察生产者的消息是否全部递交个消费者
2. 启动一个生产者，多个消费者，消费者绑定不同的routing key，观察生产者的消息是否可以正确递交给不同的消费者
3. 启动一个生产者，不启动消费者，生产者发送完消息后再启动消费者，看是否还可以接收到消息

## 测试结论

1. 消费者先于生产者启动，消费者可以正确接收对应的routing key发布消息
2. 消费者后于生产者启动，之前的消息消费者无法再接收到

## 总结

routing模式就好比路由器中的路由表，不同的消息按照不同的路由条目分发。

# 测试说明

测试**标准**Routing模式

## 模式特点

1. 生产者和消费者指定同一交换机
2. 生产者按照routing key发布消息
3. 消费者需要声明一个队列，但一般不指定队列名字，由系统分配
4. 消费者需要将队列、交换机以及routing key绑定到接收channel上
5. 如果没有消费者，则生产者的消息会丢失
6. 如果所有消费者指定的队列名字一样，则等同于work queue模式
7. 如果所有消费者指定的队列名字不一样，但绑定的routing key一样，则等同于pub/sub(fanout)模式

## 适用场景

该模式可以使消费者对消息进行过滤，只订阅自己感兴趣的消息

## 如何实施

1. 声明交换机时指定routing类型为direct
2. 声明消息队列时队列名字为空，由系统随机生成

## 测试用例

1. 启动一个生产者，1个消费者，观察生产者的消息是否全部递交个消费者
2. 启动一个生产者，多个消费者，消费者绑定不同的routing key，观察生产者的消息是否可以正确递交给不同的消费者
3. 启动一个生产者，不启动消费者，生产者发送完消息后再启动消费者，看是否还可以接收到消息

## 测试结论

1. 消费者先于生产者启动，消费者可以正确接收对应的routing key发布消息
2. 消费者后于生产者启动，之前的消息消费者无法再接收到

## 总结

routing模式就好比路由器中的路由表，不同的消息按照不同的路由条目分发。
